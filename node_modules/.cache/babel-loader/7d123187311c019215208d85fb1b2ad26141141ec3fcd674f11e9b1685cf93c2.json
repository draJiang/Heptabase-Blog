{"ast":null,"code":"var _jsxFileName = \"/Users/jiangzilong/\\u5B66\\u4E60/minpg/Heptabase-Blog/src/page/Post.js\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Link, useParams, useNavigate } from 'react-router-dom';\nimport { useLocation } from \"react-router\";\nimport Container from '../components/Container';\nimport Nav from '../components/Nav';\nimport Footer from '../components/Footer';\nimport Loading from '../components/Loading';\nimport '../index.css';\nimport 'github-markdown-css';\nimport { getHeptabaseData, getClearCard, getClearImag } from '../constantFunction';\nimport { id } from 'date-fns/locale';\nimport useHash from \"../hooks/useHash\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet windowWidth = window.innerWidth;\nlet minWidth = 600;\nfunction setCardMiniTitleAndStyle(notes) {\n  // Âà§Êñ≠Âç°ÁâáÁöÑ‰ΩçÁΩÆÔºåÂΩìÈÅÆÊå°Ââç 1 ‰∏™Âç°ÁâáÊó∂ÔºåÂâç 1 ‰∏™Âç°ÁâáÊòæÁ§∫ÂûÇÁõ¥Ê†áÈ¢ò\n  for (let j = 0; j < notes.length; j++) {\n    // Â∞èÊ†áÈ¢ò\n    console.log(notes[j].getBoundingClientRect().x);\n    console.log('---');\n    let type = 0;\n    let note;\n\n    // Â∑¶‰æßÂ∞èÊ†áÈ¢ò\n    if (notes[j].getBoundingClientRect().x <= j * 40 + 80) {\n      if (j !== 0) {\n        type = 1;\n        note = notes[j - 1];\n      }\n    }\n\n    // Âè≥‰æßÂ∞èÊ†áÈ¢ò\n    if (notes[j].getBoundingClientRect().x <= window.innerWidth - (notes.length - j) * 40) {\n      type = 2;\n      note = notes[j];\n    }\n\n    // ÈúÄË¶ÅÊòæÁ§∫Â∞èÊ†áÈ¢ò\n    if (type > 0) {\n      // Â¶ÇÊûúÂÖÉÁ¥†Êó†Ê†áÈ¢ò\n      if (note.classList.contains('mini') == false) {\n        // Ââç‰∏Ä‰∏™ÂÖÉÁ¥†ÊòæÁ§∫ÂûÇÁõ¥Ê†áÈ¢ò\n        let note_title = document.createElement('div');\n        note_title.classList.add('note_title');\n        if (type === 1) {\n          note_title.style.left = (j - 1) * 40 + 'px';\n        } else {\n          note_title.style.right = (notes.length - j) * 40 - 248 + 'px';\n        }\n\n        // Â∞èÊ†áÈ¢òÊñáÊ°à\n        if (note.getElementsByTagName('H1').length === 0) {\n          // Â¶ÇÊûúÁ¨îËÆ∞‰∏≠Ê≤°Êúâ H1 Ê†áÈ¢ò\n          note_title.innerHTML = note.innerText.substring(0, 6) + '...';\n        } else {\n          note_title.innerHTML = note.getElementsByTagName('H1')[0].innerHTML;\n        }\n        note.appendChild(note_title);\n        note.classList.add('mini');\n      }\n    } else {\n      let note_title = note.getElementsByClassName('note_title')[0];\n      if (note_title !== undefined) {\n        // ÁßªÈô§Ê†áÈ¢òÁà∂Á∫ßÂÆπÂô®ÁöÑÁ±ªÂêçÊ†áËÆ∞\n        note.classList.remove('mini');\n\n        // ÁßªÈô§Ââç‰∏Ä‰∏™ÂÖÉÁ¥†ÁöÑÂûÇÁõ¥Ê†áÈ¢ò\n        note.removeChild(note_title);\n      }\n    }\n\n    // if (notes[j].getBoundingClientRect().x <= j * 40 + 80 || notes[j].getBoundingClientRect().x >= notes[j - 1].getBoundingClientRect().x + notes[j - 1].getBoundingClientRect().width) {\n\n    //     // Â¶ÇÊûúÂâç‰∏ÄÂÖÉÁ¥†Êó†Ê†áÈ¢ò\n    //     if (notes[j - 1].classList.contains('mini') == false) {\n    //         // Ââç‰∏Ä‰∏™ÂÖÉÁ¥†ÊòæÁ§∫ÂûÇÁõ¥Ê†áÈ¢ò\n    //         let note_title = document.createElement('div')\n    //         note_title.classList.add('note_title')\n\n    //         if (notes[j].getBoundingClientRect().x <= j * 40 + 80) {\n    //             note_title.style.left = (j - 1) * 40 + 'px'\n    //         } else {\n    //             note_title.style.right = (notes.length - j) * 40 - 248 + 'px'\n    //         }\n\n    //         // Â∞èÊ†áÈ¢òÊñáÊ°à\n    //         if (notes[j - 1].getElementsByTagName('H1').length === 0) {\n    //             // Â¶ÇÊûúÁ¨îËÆ∞‰∏≠Ê≤°Êúâ H1 Ê†áÈ¢ò\n    //             note_title.innerHTML = notes[j - 1].innerText.substring(0, 6) + '...'\n    //         } else {\n    //             note_title.innerHTML = notes[j - 1].getElementsByTagName('H1')[0].innerHTML\n    //         }\n\n    //         notes[j - 1].appendChild(note_title)\n\n    //         notes[j - 1].classList.add('mini')\n    //     }\n\n    // } else {\n\n    //     let note_title = notes[j - 1].getElementsByClassName('note_title')[0]\n    //     if (note_title !== undefined) {\n\n    //         // ÁßªÈô§Ê†áÈ¢òÁà∂Á∫ßÂÆπÂô®ÁöÑÁ±ªÂêçÊ†áËÆ∞\n    //         notes[j - 1].classList.remove('mini')\n\n    //         // ÁßªÈô§Ââç‰∏Ä‰∏™ÂÖÉÁ¥†ÁöÑÂûÇÁõ¥Ê†áÈ¢ò\n    //         notes[j - 1].removeChild(note_title)\n    //     }\n\n    // }\n\n    // Ê†∑Âºè\n    if (j !== 0) {\n      if (notes[j].getBoundingClientRect().x < notes[j - 1].getBoundingClientRect().x + notes[j - 1].getBoundingClientRect().width) {\n        notes[j].classList.add('overlay');\n      } else {\n        notes[j].classList.remove('overlay');\n      }\n    }\n  }\n}\n\n// ÊñáÁ´†È°µÈù¢\nclass Post extends React.Component {\n  constructor(props) {\n    super(props);\n    this.findContent = (id, heptabase_blog_data) => {\n      if (heptabase_blog_data === '') {\n        return;\n      }\n      let new_card = null;\n      console.log('Post findContent for:');\n      for (let i = 0; i < heptabase_blog_data.cards.length; i++) {\n        if (heptabase_blog_data.cards[i]['id'] == id) {\n          // Â§ÑÁêÜÂÜÖÂÆπ‰∏≠ÁöÑÂõæÁâá\n          heptabase_blog_data.cards[i] = getClearImag(heptabase_blog_data.cards[i]);\n          console.log('getClearImag done');\n          // Â§ÑÁêÜÂÜÖÂÆπ‰∏≠ÁöÑÈìæÊé•\n          new_card = getClearCard(heptabase_blog_data.cards[i], heptabase_blog_data.cards);\n          heptabase_blog_data.cards[i] = new_card['card'];\n          return new_card;\n        }\n      }\n      return new_card;\n    };\n    this.handleLinkClick = (link_id, current_id) => {\n      // ËÆæÁΩÆÂΩìÂâçÊ¥ªË∑ÉÁöÑÁ¨îËÆ∞ÔºàÁî®Êà∑ÁÑ¶ÁÇπÔºâ\n      this.setState({\n        activeNote: link_id\n      });\n\n      // Â∑≤ÁªèÊòæÁ§∫Ê≠§Âç°ÁâáÂàô‰∏çÊõ¥Êñ∞ URL ÂíåÊï∞ÊçÆ\n      let bingo = false;\n      this.state.cardList.forEach(item => {\n        if (link_id == item['card']['id']) {\n          bingo = true;\n        }\n      });\n      if (bingo) {\n        return;\n      }\n\n      // Âà†Èô§ Link ÊâÄÂú® card ÂêéÁöÑÊâÄÊúâ URL ÂèÇÊï∞\n      let url_search = window.location.search;\n      url_search = url_search.replace('?', '');\n      url_search = url_search.replace(/&/gi, '');\n      let url_search_list = url_search.split('note-id=');\n      let new_url_search = '';\n      let current_page_index = -1;\n      for (let i = 0; i < url_search_list.length; i++) {\n        if (url_search_list[i] === '') {\n          continue;\n        }\n        if (url_search_list[i] === current_id) {\n          // URL ÂèÇÊï∞ === current_id\n          current_page_index = i;\n        } else {\n          // URL ÂèÇÊï∞ !== current_id\n        }\n        if (new_url_search == '') {\n          new_url_search += '?note-id=' + url_search_list[i];\n        } else {\n          new_url_search += '&note-id=' + url_search_list[i];\n        }\n\n        //Â¶ÇÊûúÂΩìÂâç id === current_idÔºåÂàôÂøΩÁï•ÂêéÈù¢ÁöÑÊâÄÊúâ ID\n        if (current_page_index > -1) {\n          break;\n        }\n      }\n      if (new_url_search == '') {\n        new_url_search += '?note-id=' + link_id;\n      } else {\n        new_url_search += '&note-id=' + link_id;\n      }\n\n      // ËÆæÁΩÆ URL\n      window.history.pushState({}, '', window.location.origin + '/post' + new_url_search);\n      // ËÆ∞ÂΩï URL\n      this.setState({\n        location: window.location.href\n      });\n\n      // Âà†Èô§ URL ‰∏≠‰∏çÂ≠òÂú®ÁöÑ Card\n      this.resetCardList();\n      // Ê†πÊçÆ URL Ëé∑Âèñ card Êï∞ÊçÆ\n      this.herfToData();\n    };\n    this.herfToData = () => {\n      // È¶ñÈ°µÁöÑÊÉÖÂÜµ\n      if (window.location.search === '') {\n        // ÊâæÂà∞È¶ñÈ°µÂç°ÁâáÁöÑ ID\n        let main_id = this.state.main_card['id'];\n        // ËÆæÁΩÆ URL\n        window.location.replace(window.location.origin + '/post?note-id=' + main_id);\n      }\n\n      // ‰ªé URL ‰∏≠Ëé∑Âèñ note idÔºåÊ†πÊçÆ id Ëé∑ÂèñÂç°ÁâáÊï∞ÊçÆ\n      let card_list = [];\n      let url_search = window.location.search;\n      url_search = url_search.replace('?', '');\n      url_search = url_search.replace(/&/gi, '');\n      let url_search_list = url_search.split('note-id=');\n      for (let i = 0; i < url_search_list.length; i++) {\n        if (url_search_list[i] == '') {\n          continue;\n        }\n        // Â∞ÜÊï∞ÊçÆ‰øùÂ≠òÂà∞ card list ‰∏≠\n        card_list.push(this.findContent(url_search_list[i], this.state.card));\n      }\n\n      // Êî∂ÈõÜ card Êï∞ÊçÆÂêé‰∏ÄÊ¨°ÊÄß setStateÔºàÂú® for ÂÜÖÂàÜÂ§öÊ¨° setState ÁöÑËØùÂÆπÊòì‰∏¢Â§±Êï∞ÊçÆÔºâ\n      this.setState({\n        cardList: card_list,\n        activeNote: card_list[card_list.length - 1]['card']['id'] // ËÆæÁΩÆÂΩìÂâçÊ¥ªË∑ÉÁöÑÁ¨îËÆ∞ÔºàÁî®Êà∑ÁÑ¶ÁÇπÔºâ\n      });\n    };\n    this.handleHashChange = url => {\n      setTimeout(() => {\n        let note_list = document.getElementsByClassName('container');\n        let foucus_note = this.state.activeNote;\n        console.log(note_list);\n        let target_note_offsetLeft = 0;\n        for (let j = 0; j < note_list.length; j++) {\n          let note = note_list[j];\n\n          // ÂÆö‰ΩçÂà∞ÂΩìÂâçÁî®Êà∑ÂÖ≥Ê≥®ÁöÑÁ¨îËÆ∞\n          if (note.getAttribute('note_id') === foucus_note) {\n            if (windowWidth > minWidth) {\n              console.log(target_note_offsetLeft);\n              document.getElementsByClassName('notes')[0].scrollTo({\n                left: j * 650,\n                behavior: 'smooth'\n              });\n            } else {}\n            break;\n          }\n          target_note_offsetLeft += note.clientWidth;\n        }\n\n        // ËÆæÁΩÆÊ†∑Âºè„ÄÅÂ∞èÊ†áÈ¢ò\n        setCardMiniTitleAndStyle(note_list);\n      }, 100);\n\n      // Â¶ÇÊûú url ÂèëÁîüÂèòÂåñÔºåÂàôÊõ¥Êñ∞Êï∞ÊçÆ\n      if (url !== this.state.location) {\n        // Â∞ÜÂΩìÂâç URL ‰øùÂ≠òÂà∞ state ‰∏≠\n        this.setState({\n          location: url\n        });\n        if (this.state.location !== '') {\n          // cardList ‰∏≠‰∏çÂ≠òÂú® URL ÁöÑÊüê‰∏Ä‰∏™ card\n          // Âä†ËΩΩÊ≠§ card ÁöÑÊï∞ÊçÆ\n          this.herfToData();\n        }\n      }\n\n      // Âà†Èô§ URL ‰∏≠‰∏çÂ≠òÂú®ÁöÑ Card\n      this.resetCardList();\n    };\n    this.resetCardList = () => {\n      let url = window.location.href;\n      //ÊØîÂØπ url Âíå cardList\n      for (let i = 0; i < this.state.cardList.length; i++) {\n        // url ‰∏≠‰∏çÂ≠òÂú®Ê≠§ card\n        if (url.indexOf(this.state.cardList[i]['card']['id']) < 0) {\n          // Âà†Èô§ card\n          this.state.cardList.splice(i, 1);\n          this.setState({\n            cardList: this.state.cardList\n          });\n        } else {\n          // url ‰∏≠Â≠òÂú®Ê≠§ card\n          // continue\n        }\n      }\n    };\n    this.setNoteStyle = notes => {};\n    this.state = {\n      card: null //ÊâÄÊúâÁöÑ hepta Êï∞ÊçÆ\n      ,\n      main_card: null //È¶ñÈ°µÂç°Áâá\n      ,\n      cardList: [] // ÂΩìÂâçÈ°µÈù¢ÁöÑÂç°ÁâáÂàóË°®\n      ,\n      location: '' // ËÆ∞ÂΩï URL\n      ,\n      activeNote: 'null'\n    };\n  }\n  componentDidMount() {\n    // ËØ∑Ê±Ç hepta Êï∞ÊçÆ getHeptabaseData\n    getHeptabaseData.then(res => {\n      let heptabase_blog_data = res.data;\n\n      // Â∞ÜÊï∞ÊçÆ‰øùÂ≠òÂà∞ state ‰∏≠\n      this.setState({\n        card: heptabase_blog_data,\n        main_card: res['pages']['about']\n      }, () => {\n        // Ê∏≤Êüì URL„ÄÅÊï∞ÊçÆ\n        this.herfToData();\n      });\n    });\n  }\n\n  // Ê†πÊçÆ card id Ëé∑Âèñ card content\n\n  render() {\n    if (this.state.card === null || this.state.cardList.length === 0) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Nav, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 429,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 430,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 428,\n        columnNumber: 21\n      }, this);\n    } else {\n      console.log(this.state.activeNote);\n      let card_list_dom = [];\n\n      //Â¶ÇÊûúÂ±èÂπïÂÆΩÂ∫¶ËæÉÂ∞èÔºåÂàôÂè™ÊòæÁ§∫ 1 Êù°Á¨îËÆ∞\n      if (windowWidth < minWidth) {\n        // Ëé∑ÂèñÁî®Êà∑ÂÖ≥Ê≥®ÁöÑÁ¨îËÆ∞ËøõË°åÂ±ïÁ§∫\n\n        let card = this.state.cardList[this.state.cardList.length - 1];\n        for (let k = 0; k < this.state.cardList.length; k++) {\n          if (this.state.cardList[k]['card']['id'] === this.state.activeNote) {\n            card = this.state.cardList[k];\n            break;\n          }\n        }\n\n        //ËÆæÁΩÆÁ¨îËÆ∞Ê†∑Âºè\n        // left = index*40px; right = index*-40-400\n        let note_style = {\n          left: 0\n        };\n        card_list_dom.push( /*#__PURE__*/_jsxDEV(Container, {\n          style: note_style,\n          handleHashChange: this.handleHashChange,\n          handleLinkClick: this.handleLinkClick,\n          card: card\n        }, card['card']['id'], false, {\n          fileName: _jsxFileName,\n          lineNumber: 458,\n          columnNumber: 36\n        }, this));\n      } else {\n        for (let i = 0; i < this.state.cardList.length; i++) {\n          let card = this.state.cardList[i];\n\n          //ËÆæÁΩÆÁ¨îËÆ∞Ê†∑Âºè\n          // left = index*40px; right = index*-40-400\n          let note_style = {\n            left: i * 40 + 'px',\n            right: -500 - i * 40 + 'px',\n            flex: '0 0 auto'\n          };\n          let note = /*#__PURE__*/_jsxDEV(Container, {\n            style: note_style,\n            handleHashChange: this.handleHashChange,\n            handleLinkClick: this.handleLinkClick,\n            card: card\n          }, card['card']['id'], false, {\n            fileName: _jsxFileName,\n            lineNumber: 471,\n            columnNumber: 32\n          }, this);\n          card_list_dom.push(note);\n        }\n      }\n\n      // ËÆæÁΩÆÁΩëÈ°µÊ†áÈ¢ò\n      for (let k = 0; k < this.state.cardList.length; k++) {\n        if (this.state.cardList[k]['card']['id'] === this.state.activeNote) {\n          if (this.state.cardList[k]['card']['title'] !== 'About') {\n            document.title = this.state.cardList[k]['card']['title'];\n          } else {\n            document.title = 'Jiang ÁöÑÊï∞Â≠óËä±Âõ≠üå±';\n          }\n          break;\n        }\n      }\n\n      // ÁõëÂê¨ notes ÂÆπÂô®ÊªöÂä®\n      if (document.getElementsByClassName('notes')[0] !== undefined) {\n        let notes = document.getElementsByClassName('container');\n        document.getElementsByClassName('notes')[0].addEventListener('scroll', function () {\n          setCardMiniTitleAndStyle(notes);\n        });\n      }\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"notes_box\",\n        children: [/*#__PURE__*/_jsxDEV(Nav, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 503,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"notes\",\n          children: card_list_dom\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 505,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 501,\n        columnNumber: 21\n      }, this);\n    }\n  }\n}\nexport default Post;","map":{"version":3,"names":["React","useState","useEffect","useRef","BrowserRouter","Router","Routes","Route","Link","useParams","useNavigate","useLocation","Container","Nav","Footer","Loading","getHeptabaseData","getClearCard","getClearImag","id","useHash","windowWidth","window","innerWidth","minWidth","setCardMiniTitleAndStyle","notes","j","length","console","log","getBoundingClientRect","x","type","note","classList","contains","note_title","document","createElement","add","style","left","right","getElementsByTagName","innerHTML","innerText","substring","appendChild","getElementsByClassName","undefined","remove","removeChild","width","Post","Component","constructor","props","findContent","heptabase_blog_data","new_card","i","cards","handleLinkClick","link_id","current_id","setState","activeNote","bingo","state","cardList","forEach","item","url_search","location","search","replace","url_search_list","split","new_url_search","current_page_index","history","pushState","origin","href","resetCardList","herfToData","main_id","main_card","card_list","push","card","handleHashChange","url","setTimeout","note_list","foucus_note","target_note_offsetLeft","getAttribute","scrollTo","behavior","clientWidth","indexOf","splice","setNoteStyle","componentDidMount","then","res","data","render","card_list_dom","k","note_style","flex","title","addEventListener"],"sources":["/Users/jiangzilong/Â≠¶‰π†/minpg/Heptabase-Blog/src/page/Post.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Link, useParams, useNavigate } from 'react-router-dom';\nimport { useLocation } from \"react-router\";\n\nimport Container from '../components/Container'\nimport Nav from '../components/Nav';\nimport Footer from '../components/Footer'\nimport Loading from '../components/Loading'\n\nimport '../index.css'\nimport 'github-markdown-css'\n\nimport { getHeptabaseData, getClearCard, getClearImag } from '../constantFunction'\nimport { id } from 'date-fns/locale';\n\nimport useHash from \"../hooks/useHash\";\n\n\n\nlet windowWidth = window.innerWidth\nlet minWidth = 600\n\nfunction setCardMiniTitleAndStyle(notes) {\n    // Âà§Êñ≠Âç°ÁâáÁöÑ‰ΩçÁΩÆÔºåÂΩìÈÅÆÊå°Ââç 1 ‰∏™Âç°ÁâáÊó∂ÔºåÂâç 1 ‰∏™Âç°ÁâáÊòæÁ§∫ÂûÇÁõ¥Ê†áÈ¢ò\n    for (let j = 0; j < notes.length; j++) {\n\n\n\n        // Â∞èÊ†áÈ¢ò\n        console.log(notes[j].getBoundingClientRect().x);\n        console.log('---');\n\n        let type = 0\n        let note\n\n        // Â∑¶‰æßÂ∞èÊ†áÈ¢ò\n        if (notes[j].getBoundingClientRect().x <= j * 40 + 80) {\n\n            if (j !== 0) {\n                type = 1\n                note = notes[j - 1]\n            }\n\n        }\n\n        // Âè≥‰æßÂ∞èÊ†áÈ¢ò\n        if (notes[j].getBoundingClientRect().x <= window.innerWidth - (notes.length - j) * 40) {\n\n            type = 2\n            note = notes[j]\n\n        }\n\n        // ÈúÄË¶ÅÊòæÁ§∫Â∞èÊ†áÈ¢ò\n        if (type > 0) {\n\n            // Â¶ÇÊûúÂÖÉÁ¥†Êó†Ê†áÈ¢ò\n            if (note.classList.contains('mini') == false) {\n                // Ââç‰∏Ä‰∏™ÂÖÉÁ¥†ÊòæÁ§∫ÂûÇÁõ¥Ê†áÈ¢ò\n                let note_title = document.createElement('div')\n                note_title.classList.add('note_title')\n\n                if (type === 1) {\n                    note_title.style.left = (j - 1) * 40 + 'px'\n                } else {\n                    note_title.style.right = (notes.length - j) * 40 - 248 + 'px'\n                }\n\n\n                // Â∞èÊ†áÈ¢òÊñáÊ°à\n                if (note.getElementsByTagName('H1').length === 0) {\n                    // Â¶ÇÊûúÁ¨îËÆ∞‰∏≠Ê≤°Êúâ H1 Ê†áÈ¢ò\n                    note_title.innerHTML = note.innerText.substring(0, 6) + '...'\n                } else {\n                    note_title.innerHTML = note.getElementsByTagName('H1')[0].innerHTML\n                }\n\n\n                note.appendChild(note_title)\n\n                note.classList.add('mini')\n            }\n\n        } else {\n\n            let note_title = note.getElementsByClassName('note_title')[0]\n            if (note_title !== undefined) {\n\n                // ÁßªÈô§Ê†áÈ¢òÁà∂Á∫ßÂÆπÂô®ÁöÑÁ±ªÂêçÊ†áËÆ∞\n                note.classList.remove('mini')\n\n                // ÁßªÈô§Ââç‰∏Ä‰∏™ÂÖÉÁ¥†ÁöÑÂûÇÁõ¥Ê†áÈ¢ò\n                note.removeChild(note_title)\n            }\n\n        }\n\n        // if (notes[j].getBoundingClientRect().x <= j * 40 + 80 || notes[j].getBoundingClientRect().x >= notes[j - 1].getBoundingClientRect().x + notes[j - 1].getBoundingClientRect().width) {\n\n        //     // Â¶ÇÊûúÂâç‰∏ÄÂÖÉÁ¥†Êó†Ê†áÈ¢ò\n        //     if (notes[j - 1].classList.contains('mini') == false) {\n        //         // Ââç‰∏Ä‰∏™ÂÖÉÁ¥†ÊòæÁ§∫ÂûÇÁõ¥Ê†áÈ¢ò\n        //         let note_title = document.createElement('div')\n        //         note_title.classList.add('note_title')\n\n        //         if (notes[j].getBoundingClientRect().x <= j * 40 + 80) {\n        //             note_title.style.left = (j - 1) * 40 + 'px'\n        //         } else {\n        //             note_title.style.right = (notes.length - j) * 40 - 248 + 'px'\n        //         }\n\n\n        //         // Â∞èÊ†áÈ¢òÊñáÊ°à\n        //         if (notes[j - 1].getElementsByTagName('H1').length === 0) {\n        //             // Â¶ÇÊûúÁ¨îËÆ∞‰∏≠Ê≤°Êúâ H1 Ê†áÈ¢ò\n        //             note_title.innerHTML = notes[j - 1].innerText.substring(0, 6) + '...'\n        //         } else {\n        //             note_title.innerHTML = notes[j - 1].getElementsByTagName('H1')[0].innerHTML\n        //         }\n\n\n        //         notes[j - 1].appendChild(note_title)\n\n        //         notes[j - 1].classList.add('mini')\n        //     }\n\n        // } else {\n\n        //     let note_title = notes[j - 1].getElementsByClassName('note_title')[0]\n        //     if (note_title !== undefined) {\n\n        //         // ÁßªÈô§Ê†áÈ¢òÁà∂Á∫ßÂÆπÂô®ÁöÑÁ±ªÂêçÊ†áËÆ∞\n        //         notes[j - 1].classList.remove('mini')\n\n        //         // ÁßªÈô§Ââç‰∏Ä‰∏™ÂÖÉÁ¥†ÁöÑÂûÇÁõ¥Ê†áÈ¢ò\n        //         notes[j - 1].removeChild(note_title)\n        //     }\n\n        // }\n\n        // Ê†∑Âºè\n        if (j !== 0) {\n            if (notes[j].getBoundingClientRect().x < notes[j - 1].getBoundingClientRect().x + notes[j - 1].getBoundingClientRect().width) {\n                notes[j].classList.add('overlay')\n            } else {\n                notes[j].classList.remove('overlay')\n            }\n        }\n\n\n    }\n}\n\n// ÊñáÁ´†È°µÈù¢\nclass Post extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            card: null //ÊâÄÊúâÁöÑ hepta Êï∞ÊçÆ\n            , main_card: null //È¶ñÈ°µÂç°Áâá\n            , cardList: [] // ÂΩìÂâçÈ°µÈù¢ÁöÑÂç°ÁâáÂàóË°®\n            , location: '' // ËÆ∞ÂΩï URL\n            , activeNote: 'null'\n        };\n    }\n\n    componentDidMount() {\n\n        // ËØ∑Ê±Ç hepta Êï∞ÊçÆ getHeptabaseData\n        getHeptabaseData.then((res) => {\n\n            let heptabase_blog_data = res.data\n\n            // Â∞ÜÊï∞ÊçÆ‰øùÂ≠òÂà∞ state ‰∏≠\n            this.setState({\n                card: heptabase_blog_data,\n                main_card: res['pages']['about']\n            }, () => {\n\n                // Ê∏≤Êüì URL„ÄÅÊï∞ÊçÆ\n                this.herfToData()\n            })\n\n        })\n\n    }\n\n    // Ê†πÊçÆ card id Ëé∑Âèñ card content\n    findContent = (id, heptabase_blog_data) => {\n        if (heptabase_blog_data === '') {\n            return\n        }\n\n        let new_card = null\n        console.log('Post findContent for:');\n        for (let i = 0; i < heptabase_blog_data.cards.length; i++) {\n\n            if (heptabase_blog_data.cards[i]['id'] == id) {\n\n                // Â§ÑÁêÜÂÜÖÂÆπ‰∏≠ÁöÑÂõæÁâá\n                heptabase_blog_data.cards[i] = getClearImag(heptabase_blog_data.cards[i])\n                console.log('getClearImag done');\n                // Â§ÑÁêÜÂÜÖÂÆπ‰∏≠ÁöÑÈìæÊé•\n                new_card = getClearCard(heptabase_blog_data.cards[i], heptabase_blog_data.cards)\n                heptabase_blog_data.cards[i] = new_card['card']\n\n                return new_card\n\n            }\n        }\n\n        return new_card\n\n    }\n\n    // ÊñáÁ´†ÂÜÖÈìæÊé•„ÄÅÂèçÂêëÈìæÊé•ÁÇπÂáª\n    handleLinkClick = (link_id, current_id) => {\n\n        // ËÆæÁΩÆÂΩìÂâçÊ¥ªË∑ÉÁöÑÁ¨îËÆ∞ÔºàÁî®Êà∑ÁÑ¶ÁÇπÔºâ\n        this.setState({\n            activeNote: link_id\n        })\n\n        // Â∑≤ÁªèÊòæÁ§∫Ê≠§Âç°ÁâáÂàô‰∏çÊõ¥Êñ∞ URL ÂíåÊï∞ÊçÆ\n        let bingo = false\n        this.state.cardList.forEach(item => {\n\n            if (link_id == item['card']['id']) {\n\n                bingo = true\n\n            }\n\n        });\n\n        if (bingo) {\n\n            return\n        }\n\n        // Âà†Èô§ Link ÊâÄÂú® card ÂêéÁöÑÊâÄÊúâ URL ÂèÇÊï∞\n        let url_search = window.location.search\n        url_search = url_search.replace('?', '')\n        url_search = url_search.replace(/&/gi, '')\n        let url_search_list = url_search.split('note-id=')\n\n        let new_url_search = ''\n        let current_page_index = -1\n        for (let i = 0; i < url_search_list.length; i++) {\n\n            if (url_search_list[i] === '') {\n                continue\n            }\n\n            if (url_search_list[i] === current_id) {\n                // URL ÂèÇÊï∞ === current_id\n                current_page_index = i\n            } else {\n                // URL ÂèÇÊï∞ !== current_id\n            }\n\n            if (new_url_search == '') {\n                new_url_search += '?note-id=' + url_search_list[i]\n            } else {\n                new_url_search += '&note-id=' + url_search_list[i]\n            }\n\n            //Â¶ÇÊûúÂΩìÂâç id === current_idÔºåÂàôÂøΩÁï•ÂêéÈù¢ÁöÑÊâÄÊúâ ID\n            if (current_page_index > -1) {\n                break;\n            }\n        }\n\n        if (new_url_search == '') {\n            new_url_search += '?note-id=' + link_id\n        } else {\n            new_url_search += '&note-id=' + link_id\n        }\n\n        // ËÆæÁΩÆ URL\n        window.history.pushState({}, '', window.location.origin + '/post' + new_url_search)\n        // ËÆ∞ÂΩï URL\n        this.setState({\n            location: window.location.href\n        })\n\n\n        // Âà†Èô§ URL ‰∏≠‰∏çÂ≠òÂú®ÁöÑ Card\n        this.resetCardList()\n        // Ê†πÊçÆ URL Ëé∑Âèñ card Êï∞ÊçÆ\n        this.herfToData()\n\n    }\n\n    herfToData = () => {\n\n        // È¶ñÈ°µÁöÑÊÉÖÂÜµ\n        if (window.location.search === '') {\n\n            // ÊâæÂà∞È¶ñÈ°µÂç°ÁâáÁöÑ ID\n            let main_id = this.state.main_card['id']\n            // ËÆæÁΩÆ URL\n            window.location.replace(window.location.origin + '/post?note-id=' + main_id)\n\n        }\n\n        // ‰ªé URL ‰∏≠Ëé∑Âèñ note idÔºåÊ†πÊçÆ id Ëé∑ÂèñÂç°ÁâáÊï∞ÊçÆ\n        let card_list = []\n        let url_search = window.location.search\n        url_search = url_search.replace('?', '')\n        url_search = url_search.replace(/&/gi, '')\n        let url_search_list = url_search.split('note-id=')\n\n        for (let i = 0; i < url_search_list.length; i++) {\n            if (url_search_list[i] == '') {\n                continue\n            }\n            // Â∞ÜÊï∞ÊçÆ‰øùÂ≠òÂà∞ card list ‰∏≠\n            card_list.push(this.findContent(url_search_list[i], this.state.card))\n\n        }\n\n        // Êî∂ÈõÜ card Êï∞ÊçÆÂêé‰∏ÄÊ¨°ÊÄß setStateÔºàÂú® for ÂÜÖÂàÜÂ§öÊ¨° setState ÁöÑËØùÂÆπÊòì‰∏¢Â§±Êï∞ÊçÆÔºâ\n        this.setState({\n            cardList: card_list,\n            activeNote: card_list[card_list.length - 1]['card']['id'] // ËÆæÁΩÆÂΩìÂâçÊ¥ªË∑ÉÁöÑÁ¨îËÆ∞ÔºàÁî®Êà∑ÁÑ¶ÁÇπÔºâ\n        })\n\n\n    }\n\n    // ÂΩì URL ÂèòÂåñÊó∂ÔºàÂ≠êÁªÑ‰ª∂ container ËΩΩÂÖ•ÂÆåÊØïÂêé‰πü‰ºöË∞ÉÁî®Ê≠§ÊñπÊ≥ïÔºâ\n    handleHashChange = (url) => {\n\n\n        setTimeout(() => {\n            let note_list = document.getElementsByClassName('container')\n            let foucus_note = this.state.activeNote\n            console.log(note_list);\n\n            let target_note_offsetLeft = 0\n            for (let j = 0; j < note_list.length; j++) {\n                let note = note_list[j]\n\n                // ÂÆö‰ΩçÂà∞ÂΩìÂâçÁî®Êà∑ÂÖ≥Ê≥®ÁöÑÁ¨îËÆ∞\n                if (note.getAttribute('note_id') === foucus_note) {\n\n                    if (windowWidth > minWidth) {\n                        console.log(target_note_offsetLeft);\n                        document.getElementsByClassName('notes')[0].scrollTo({ left: j * 650, behavior: 'smooth' })\n                    } else {\n\n                    }\n\n                    break;\n\n                }\n\n\n\n\n                target_note_offsetLeft += note.clientWidth\n            }\n\n            // ËÆæÁΩÆÊ†∑Âºè„ÄÅÂ∞èÊ†áÈ¢ò\n            setCardMiniTitleAndStyle(note_list)\n\n        }, 100);\n\n        // Â¶ÇÊûú url ÂèëÁîüÂèòÂåñÔºåÂàôÊõ¥Êñ∞Êï∞ÊçÆ\n        if (url !== this.state.location) {\n\n\n            // Â∞ÜÂΩìÂâç URL ‰øùÂ≠òÂà∞ state ‰∏≠\n            this.setState({\n                location: url\n            })\n\n            if (this.state.location !== '') {\n\n                // cardList ‰∏≠‰∏çÂ≠òÂú® URL ÁöÑÊüê‰∏Ä‰∏™ card\n                // Âä†ËΩΩÊ≠§ card ÁöÑÊï∞ÊçÆ\n                this.herfToData()\n\n            }\n\n        }\n\n        // Âà†Èô§ URL ‰∏≠‰∏çÂ≠òÂú®ÁöÑ Card\n        this.resetCardList()\n\n    }\n\n    // Âà†Èô§ URL ‰∏≠‰∏çÂ≠òÂú®ÁöÑ Card\n    resetCardList = () => {\n        let url = window.location.href\n        //ÊØîÂØπ url Âíå cardList\n        for (let i = 0; i < this.state.cardList.length; i++) {\n            // url ‰∏≠‰∏çÂ≠òÂú®Ê≠§ card\n            if (url.indexOf(this.state.cardList[i]['card']['id']) < 0) {\n\n\n                // Âà†Èô§ card\n                this.state.cardList.splice(i, 1)\n                this.setState({\n                    cardList: this.state.cardList\n                })\n\n            } else {\n                // url ‰∏≠Â≠òÂú®Ê≠§ card\n                // continue\n            }\n\n        }\n\n    }\n\n    // ËÆæÁΩÆÁ¨îËÆ∞Ê†∑Âºè\n    setNoteStyle = (notes) => {\n\n\n\n    }\n\n    render() {\n        if (this.state.card === null || this.state.cardList.length === 0) {\n            return (<div>\n                <Nav />\n                <Loading />\n                <Footer />\n            </div>)\n        } else {\n\n            console.log(this.state.activeNote);\n\n            let card_list_dom = []\n\n            //Â¶ÇÊûúÂ±èÂπïÂÆΩÂ∫¶ËæÉÂ∞èÔºåÂàôÂè™ÊòæÁ§∫ 1 Êù°Á¨îËÆ∞\n            if (windowWidth < minWidth) {\n\n                // Ëé∑ÂèñÁî®Êà∑ÂÖ≥Ê≥®ÁöÑÁ¨îËÆ∞ËøõË°åÂ±ïÁ§∫\n\n                let card = this.state.cardList[this.state.cardList.length - 1]\n\n                for (let k = 0; k < this.state.cardList.length; k++) {\n                    if (this.state.cardList[k]['card']['id'] === this.state.activeNote) {\n                        card = this.state.cardList[k]\n                        break;\n                    }\n                }\n\n                //ËÆæÁΩÆÁ¨îËÆ∞Ê†∑Âºè\n                // left = index*40px; right = index*-40-400\n                let note_style = {\n                    left: 0\n                }\n                card_list_dom.push(<Container style={note_style} key={card['card']['id']} handleHashChange={this.handleHashChange} handleLinkClick={this.handleLinkClick} card={card} />)\n            } else {\n                for (let i = 0; i < this.state.cardList.length; i++) {\n                    let card = this.state.cardList[i]\n\n                    //ËÆæÁΩÆÁ¨îËÆ∞Ê†∑Âºè\n                    // left = index*40px; right = index*-40-400\n                    let note_style = {\n                        left: i * 40 + 'px',\n                        right: -500 - i * 40 + 'px',\n                        flex: '0 0 auto'\n                    }\n\n                    let note = <Container style={note_style} key={card['card']['id']} handleHashChange={this.handleHashChange} handleLinkClick={this.handleLinkClick} card={card} />\n                    card_list_dom.push(note)\n                }\n            }\n\n            // ËÆæÁΩÆÁΩëÈ°µÊ†áÈ¢ò\n            for (let k = 0; k < this.state.cardList.length; k++) {\n                if (this.state.cardList[k]['card']['id'] === this.state.activeNote) {\n\n                    if (this.state.cardList[k]['card']['title'] !== 'About') {\n                        document.title = this.state.cardList[k]['card']['title']\n                    } else {\n                        document.title = 'Jiang ÁöÑÊï∞Â≠óËä±Âõ≠üå±'\n                    }\n\n                    break;\n                }\n            }\n\n            // ÁõëÂê¨ notes ÂÆπÂô®ÊªöÂä®\n            if (document.getElementsByClassName('notes')[0] !== undefined) {\n\n                let notes = document.getElementsByClassName('container')\n                document.getElementsByClassName('notes')[0].addEventListener('scroll', function () {\n\n                    setCardMiniTitleAndStyle(notes)\n\n                })\n            }\n\n            return (<div className='notes_box'>\n\n                <Nav />\n                {/* <Container card={card} /> */}\n                <div className='notes'>\n                    {card_list_dom}\n                </div>\n\n                {/* <Footer /> */}\n\n            </div>)\n        }\n    }\n\n\n\n}\n\nexport default Post;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}