{"ast":null,"code":"/**\n * @typedef {import('mdast').ListItem} ListItem\n * @typedef {import('mdast').List} List\n * @typedef {import('../util/indent-lines.js').Map} Map\n * @typedef {import('../types.js').Options} Options\n * @typedef {import('../types.js').Handle} Handle\n */\n\nimport { checkBullet } from '../util/check-bullet.js';\nimport { checkListItemIndent } from '../util/check-list-item-indent.js';\nimport { containerFlow } from '../util/container-flow.js';\nimport { indentLines } from '../util/indent-lines.js';\nimport { track } from '../util/track.js';\n\n/**\n * @type {Handle}\n * @param {ListItem} node\n */\nexport function listItem(node, parent, context, safeOptions) {\n  const listItemIndent = checkListItemIndent(context);\n  let bullet = context.bulletCurrent || checkBullet(context);\n\n  // Add the marker value for ordered lists.\n  if (parent && parent.type === 'list' && parent.ordered) {\n    bullet = (typeof parent.start === 'number' && parent.start > -1 ? parent.start : 1) + (context.options.incrementListMarker === false ? 0 : parent.children.indexOf(node)) + bullet;\n  }\n  let size = bullet.length + 1;\n  if (listItemIndent === 'tab' || listItemIndent === 'mixed' && (parent && parent.type === 'list' && parent.spread || node.spread)) {\n    size = Math.ceil(size / 4) * 4;\n  }\n  const tracker = track(safeOptions);\n  tracker.move(bullet + ' '.repeat(size - bullet.length));\n  tracker.shift(size);\n  const exit = context.enter('listItem');\n  const value = indentLines(containerFlow(node, context, tracker.current()), map);\n  exit();\n  return value;\n\n  /** @type {Map} */\n  function map(line, index, blank) {\n    if (index) {\n      return (blank ? '' : ' '.repeat(size)) + line;\n    }\n    return (blank ? bullet : bullet + ' '.repeat(size - bullet.length)) + line;\n  }\n}","map":{"version":3,"names":["checkBullet","checkListItemIndent","containerFlow","indentLines","track","listItem","node","parent","context","safeOptions","listItemIndent","bullet","bulletCurrent","type","ordered","start","options","incrementListMarker","children","indexOf","size","length","spread","Math","ceil","tracker","move","repeat","shift","exit","enter","value","current","map","line","index","blank"],"sources":["/Users/jiangzilong/学习/minpg/Heptabase-Blog/node_modules/mdast-util-to-markdown/lib/handle/list-item.js"],"sourcesContent":["/**\n * @typedef {import('mdast').ListItem} ListItem\n * @typedef {import('mdast').List} List\n * @typedef {import('../util/indent-lines.js').Map} Map\n * @typedef {import('../types.js').Options} Options\n * @typedef {import('../types.js').Handle} Handle\n */\n\nimport {checkBullet} from '../util/check-bullet.js'\nimport {checkListItemIndent} from '../util/check-list-item-indent.js'\nimport {containerFlow} from '../util/container-flow.js'\nimport {indentLines} from '../util/indent-lines.js'\nimport {track} from '../util/track.js'\n\n/**\n * @type {Handle}\n * @param {ListItem} node\n */\nexport function listItem(node, parent, context, safeOptions) {\n  const listItemIndent = checkListItemIndent(context)\n  let bullet = context.bulletCurrent || checkBullet(context)\n\n  // Add the marker value for ordered lists.\n  if (parent && parent.type === 'list' && parent.ordered) {\n    bullet =\n      (typeof parent.start === 'number' && parent.start > -1\n        ? parent.start\n        : 1) +\n      (context.options.incrementListMarker === false\n        ? 0\n        : parent.children.indexOf(node)) +\n      bullet\n  }\n\n  let size = bullet.length + 1\n\n  if (\n    listItemIndent === 'tab' ||\n    (listItemIndent === 'mixed' &&\n      ((parent && parent.type === 'list' && parent.spread) || node.spread))\n  ) {\n    size = Math.ceil(size / 4) * 4\n  }\n\n  const tracker = track(safeOptions)\n  tracker.move(bullet + ' '.repeat(size - bullet.length))\n  tracker.shift(size)\n  const exit = context.enter('listItem')\n  const value = indentLines(\n    containerFlow(node, context, tracker.current()),\n    map\n  )\n  exit()\n\n  return value\n\n  /** @type {Map} */\n  function map(line, index, blank) {\n    if (index) {\n      return (blank ? '' : ' '.repeat(size)) + line\n    }\n\n    return (blank ? bullet : bullet + ' '.repeat(size - bullet.length)) + line\n  }\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAQA,WAAW,QAAO,yBAAyB;AACnD,SAAQC,mBAAmB,QAAO,mCAAmC;AACrE,SAAQC,aAAa,QAAO,2BAA2B;AACvD,SAAQC,WAAW,QAAO,yBAAyB;AACnD,SAAQC,KAAK,QAAO,kBAAkB;;AAEtC;AACA;AACA;AACA;AACA,OAAO,SAASC,QAAQ,CAACC,IAAI,EAAEC,MAAM,EAAEC,OAAO,EAAEC,WAAW,EAAE;EAC3D,MAAMC,cAAc,GAAGT,mBAAmB,CAACO,OAAO,CAAC;EACnD,IAAIG,MAAM,GAAGH,OAAO,CAACI,aAAa,IAAIZ,WAAW,CAACQ,OAAO,CAAC;;EAE1D;EACA,IAAID,MAAM,IAAIA,MAAM,CAACM,IAAI,KAAK,MAAM,IAAIN,MAAM,CAACO,OAAO,EAAE;IACtDH,MAAM,GACJ,CAAC,OAAOJ,MAAM,CAACQ,KAAK,KAAK,QAAQ,IAAIR,MAAM,CAACQ,KAAK,GAAG,CAAC,CAAC,GAClDR,MAAM,CAACQ,KAAK,GACZ,CAAC,KACJP,OAAO,CAACQ,OAAO,CAACC,mBAAmB,KAAK,KAAK,GAC1C,CAAC,GACDV,MAAM,CAACW,QAAQ,CAACC,OAAO,CAACb,IAAI,CAAC,CAAC,GAClCK,MAAM;EACV;EAEA,IAAIS,IAAI,GAAGT,MAAM,CAACU,MAAM,GAAG,CAAC;EAE5B,IACEX,cAAc,KAAK,KAAK,IACvBA,cAAc,KAAK,OAAO,KACvBH,MAAM,IAAIA,MAAM,CAACM,IAAI,KAAK,MAAM,IAAIN,MAAM,CAACe,MAAM,IAAKhB,IAAI,CAACgB,MAAM,CAAE,EACvE;IACAF,IAAI,GAAGG,IAAI,CAACC,IAAI,CAACJ,IAAI,GAAG,CAAC,CAAC,GAAG,CAAC;EAChC;EAEA,MAAMK,OAAO,GAAGrB,KAAK,CAACK,WAAW,CAAC;EAClCgB,OAAO,CAACC,IAAI,CAACf,MAAM,GAAG,GAAG,CAACgB,MAAM,CAACP,IAAI,GAAGT,MAAM,CAACU,MAAM,CAAC,CAAC;EACvDI,OAAO,CAACG,KAAK,CAACR,IAAI,CAAC;EACnB,MAAMS,IAAI,GAAGrB,OAAO,CAACsB,KAAK,CAAC,UAAU,CAAC;EACtC,MAAMC,KAAK,GAAG5B,WAAW,CACvBD,aAAa,CAACI,IAAI,EAAEE,OAAO,EAAEiB,OAAO,CAACO,OAAO,EAAE,CAAC,EAC/CC,GAAG,CACJ;EACDJ,IAAI,EAAE;EAEN,OAAOE,KAAK;;EAEZ;EACA,SAASE,GAAG,CAACC,IAAI,EAAEC,KAAK,EAAEC,KAAK,EAAE;IAC/B,IAAID,KAAK,EAAE;MACT,OAAO,CAACC,KAAK,GAAG,EAAE,GAAG,GAAG,CAACT,MAAM,CAACP,IAAI,CAAC,IAAIc,IAAI;IAC/C;IAEA,OAAO,CAACE,KAAK,GAAGzB,MAAM,GAAGA,MAAM,GAAG,GAAG,CAACgB,MAAM,CAACP,IAAI,GAAGT,MAAM,CAACU,MAAM,CAAC,IAAIa,IAAI;EAC5E;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}