{"ast":null,"code":"/**\n * @typedef {import('mdast').Delete} Delete\n * @typedef {import('mdast-util-from-markdown').Extension} FromMarkdownExtension\n * @typedef {import('mdast-util-from-markdown').Handle} FromMarkdownHandle\n * @typedef {import('mdast-util-to-markdown').Options} ToMarkdownExtension\n * @typedef {import('mdast-util-to-markdown').Handle} ToMarkdownHandle\n */\n\nimport { containerPhrasing } from 'mdast-util-to-markdown/lib/util/container-phrasing.js';\nimport { track } from 'mdast-util-to-markdown/lib/util/track.js';\n\n/** @type {FromMarkdownExtension} */\nexport const gfmStrikethroughFromMarkdown = {\n  canContainEols: ['delete'],\n  enter: {\n    strikethrough: enterStrikethrough\n  },\n  exit: {\n    strikethrough: exitStrikethrough\n  }\n};\n\n/**\n * List of constructs that occur in phrasing (paragraphs, headings), but cannot\n * contain strikethroughs. So they sort of cancel each other out.\n *\n * Note: keep in sync with: <https://github.com/syntax-tree/mdast-util-to-markdown/blob/c47743b/lib/unsafe.js#L11>\n */\nconst constructsWithoutStrikethrough = ['autolink', 'destinationLiteral', 'destinationRaw', 'reference', 'titleQuote', 'titleApostrophe'];\n\n/** @type {ToMarkdownExtension} */\nexport const gfmStrikethroughToMarkdown = {\n  unsafe: [{\n    character: '~',\n    inConstruct: 'phrasing',\n    notInConstruct: constructsWithoutStrikethrough\n  }],\n  handlers: {\n    delete: handleDelete\n  }\n};\nhandleDelete.peek = peekDelete;\n\n/** @type {FromMarkdownHandle} */\nfunction enterStrikethrough(token) {\n  this.enter({\n    type: 'delete',\n    children: []\n  }, token);\n}\n\n/** @type {FromMarkdownHandle} */\nfunction exitStrikethrough(token) {\n  this.exit(token);\n}\n\n/**\n * @type {ToMarkdownHandle}\n * @param {Delete} node\n */\nfunction handleDelete(node, _, context, safeOptions) {\n  const tracker = track(safeOptions);\n  const exit = context.enter('emphasis');\n  let value = tracker.move('~~');\n  value += containerPhrasing(node, context, {\n    ...tracker.current(),\n    before: value,\n    after: '~'\n  });\n  value += tracker.move('~~');\n  exit();\n  return value;\n}\n\n/** @type {ToMarkdownHandle} */\nfunction peekDelete() {\n  return '~';\n}","map":{"version":3,"names":["containerPhrasing","track","gfmStrikethroughFromMarkdown","canContainEols","enter","strikethrough","enterStrikethrough","exit","exitStrikethrough","constructsWithoutStrikethrough","gfmStrikethroughToMarkdown","unsafe","character","inConstruct","notInConstruct","handlers","delete","handleDelete","peek","peekDelete","token","type","children","node","_","context","safeOptions","tracker","value","move","current","before","after"],"sources":["/Users/jiangzilong/学习/minpg/Heptabase-Blog/node_modules/mdast-util-gfm-strikethrough/index.js"],"sourcesContent":["/**\n * @typedef {import('mdast').Delete} Delete\n * @typedef {import('mdast-util-from-markdown').Extension} FromMarkdownExtension\n * @typedef {import('mdast-util-from-markdown').Handle} FromMarkdownHandle\n * @typedef {import('mdast-util-to-markdown').Options} ToMarkdownExtension\n * @typedef {import('mdast-util-to-markdown').Handle} ToMarkdownHandle\n */\n\nimport {containerPhrasing} from 'mdast-util-to-markdown/lib/util/container-phrasing.js'\nimport {track} from 'mdast-util-to-markdown/lib/util/track.js'\n\n/** @type {FromMarkdownExtension} */\nexport const gfmStrikethroughFromMarkdown = {\n  canContainEols: ['delete'],\n  enter: {strikethrough: enterStrikethrough},\n  exit: {strikethrough: exitStrikethrough}\n}\n\n/**\n * List of constructs that occur in phrasing (paragraphs, headings), but cannot\n * contain strikethroughs. So they sort of cancel each other out.\n *\n * Note: keep in sync with: <https://github.com/syntax-tree/mdast-util-to-markdown/blob/c47743b/lib/unsafe.js#L11>\n */\nconst constructsWithoutStrikethrough = [\n  'autolink',\n  'destinationLiteral',\n  'destinationRaw',\n  'reference',\n  'titleQuote',\n  'titleApostrophe'\n]\n\n/** @type {ToMarkdownExtension} */\nexport const gfmStrikethroughToMarkdown = {\n  unsafe: [\n    {\n      character: '~',\n      inConstruct: 'phrasing',\n      notInConstruct: constructsWithoutStrikethrough\n    }\n  ],\n  handlers: {delete: handleDelete}\n}\n\nhandleDelete.peek = peekDelete\n\n/** @type {FromMarkdownHandle} */\nfunction enterStrikethrough(token) {\n  this.enter({type: 'delete', children: []}, token)\n}\n\n/** @type {FromMarkdownHandle} */\nfunction exitStrikethrough(token) {\n  this.exit(token)\n}\n\n/**\n * @type {ToMarkdownHandle}\n * @param {Delete} node\n */\nfunction handleDelete(node, _, context, safeOptions) {\n  const tracker = track(safeOptions)\n  const exit = context.enter('emphasis')\n  let value = tracker.move('~~')\n  value += containerPhrasing(node, context, {\n    ...tracker.current(),\n    before: value,\n    after: '~'\n  })\n  value += tracker.move('~~')\n  exit()\n  return value\n}\n\n/** @type {ToMarkdownHandle} */\nfunction peekDelete() {\n  return '~'\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAQA,iBAAiB,QAAO,uDAAuD;AACvF,SAAQC,KAAK,QAAO,0CAA0C;;AAE9D;AACA,OAAO,MAAMC,4BAA4B,GAAG;EAC1CC,cAAc,EAAE,CAAC,QAAQ,CAAC;EAC1BC,KAAK,EAAE;IAACC,aAAa,EAAEC;EAAkB,CAAC;EAC1CC,IAAI,EAAE;IAACF,aAAa,EAAEG;EAAiB;AACzC,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,8BAA8B,GAAG,CACrC,UAAU,EACV,oBAAoB,EACpB,gBAAgB,EAChB,WAAW,EACX,YAAY,EACZ,iBAAiB,CAClB;;AAED;AACA,OAAO,MAAMC,0BAA0B,GAAG;EACxCC,MAAM,EAAE,CACN;IACEC,SAAS,EAAE,GAAG;IACdC,WAAW,EAAE,UAAU;IACvBC,cAAc,EAAEL;EAClB,CAAC,CACF;EACDM,QAAQ,EAAE;IAACC,MAAM,EAAEC;EAAY;AACjC,CAAC;AAEDA,YAAY,CAACC,IAAI,GAAGC,UAAU;;AAE9B;AACA,SAASb,kBAAkB,CAACc,KAAK,EAAE;EACjC,IAAI,CAAChB,KAAK,CAAC;IAACiB,IAAI,EAAE,QAAQ;IAAEC,QAAQ,EAAE;EAAE,CAAC,EAAEF,KAAK,CAAC;AACnD;;AAEA;AACA,SAASZ,iBAAiB,CAACY,KAAK,EAAE;EAChC,IAAI,CAACb,IAAI,CAACa,KAAK,CAAC;AAClB;;AAEA;AACA;AACA;AACA;AACA,SAASH,YAAY,CAACM,IAAI,EAAEC,CAAC,EAAEC,OAAO,EAAEC,WAAW,EAAE;EACnD,MAAMC,OAAO,GAAG1B,KAAK,CAACyB,WAAW,CAAC;EAClC,MAAMnB,IAAI,GAAGkB,OAAO,CAACrB,KAAK,CAAC,UAAU,CAAC;EACtC,IAAIwB,KAAK,GAAGD,OAAO,CAACE,IAAI,CAAC,IAAI,CAAC;EAC9BD,KAAK,IAAI5B,iBAAiB,CAACuB,IAAI,EAAEE,OAAO,EAAE;IACxC,GAAGE,OAAO,CAACG,OAAO,EAAE;IACpBC,MAAM,EAAEH,KAAK;IACbI,KAAK,EAAE;EACT,CAAC,CAAC;EACFJ,KAAK,IAAID,OAAO,CAACE,IAAI,CAAC,IAAI,CAAC;EAC3BtB,IAAI,EAAE;EACN,OAAOqB,KAAK;AACd;;AAEA;AACA,SAAST,UAAU,GAAG;EACpB,OAAO,GAAG;AACZ"},"metadata":{},"sourceType":"module","externalDependencies":[]}