{"ast":null,"code":"/*!\n * unpipe\n * Copyright(c) 2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict';\n\n/**\n * Module exports.\n * @public\n */\nmodule.exports = unpipe;\n\n/**\n * Determine if there are Node.js pipe-like data listeners.\n * @private\n */\n\nfunction hasPipeDataListeners(stream) {\n  var listeners = stream.listeners('data');\n  for (var i = 0; i < listeners.length; i++) {\n    if (listeners[i].name === 'ondata') {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Unpipe a stream from all destinations.\n *\n * @param {object} stream\n * @public\n */\n\nfunction unpipe(stream) {\n  if (!stream) {\n    throw new TypeError('argument stream is required');\n  }\n  if (typeof stream.unpipe === 'function') {\n    // new-style\n    stream.unpipe();\n    return;\n  }\n\n  // Node.js 0.8 hack\n  if (!hasPipeDataListeners(stream)) {\n    return;\n  }\n  var listener;\n  var listeners = stream.listeners('close');\n  for (var i = 0; i < listeners.length; i++) {\n    listener = listeners[i];\n    if (listener.name !== 'cleanup' && listener.name !== 'onclose') {\n      continue;\n    }\n\n    // invoke the listener\n    listener.call(stream);\n  }\n}","map":{"version":3,"names":["module","exports","unpipe","hasPipeDataListeners","stream","listeners","i","length","name","TypeError","listener","call"],"sources":["/Users/jiangzilong/学习/minpg/Heptabase-Blog/node_modules/unpipe/index.js"],"sourcesContent":["/*!\n * unpipe\n * Copyright(c) 2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = unpipe\n\n/**\n * Determine if there are Node.js pipe-like data listeners.\n * @private\n */\n\nfunction hasPipeDataListeners(stream) {\n  var listeners = stream.listeners('data')\n\n  for (var i = 0; i < listeners.length; i++) {\n    if (listeners[i].name === 'ondata') {\n      return true\n    }\n  }\n\n  return false\n}\n\n/**\n * Unpipe a stream from all destinations.\n *\n * @param {object} stream\n * @public\n */\n\nfunction unpipe(stream) {\n  if (!stream) {\n    throw new TypeError('argument stream is required')\n  }\n\n  if (typeof stream.unpipe === 'function') {\n    // new-style\n    stream.unpipe()\n    return\n  }\n\n  // Node.js 0.8 hack\n  if (!hasPipeDataListeners(stream)) {\n    return\n  }\n\n  var listener\n  var listeners = stream.listeners('close')\n\n  for (var i = 0; i < listeners.length; i++) {\n    listener = listeners[i]\n\n    if (listener.name !== 'cleanup' && listener.name !== 'onclose') {\n      continue\n    }\n\n    // invoke the listener\n    listener.call(stream)\n  }\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;;AAEA,YAAY;;AAEZ;AACA;AACA;AACA;AAEAA,MAAM,CAACC,OAAO,GAAGC,MAAM;;AAEvB;AACA;AACA;AACA;;AAEA,SAASC,oBAAoB,CAACC,MAAM,EAAE;EACpC,IAAIC,SAAS,GAAGD,MAAM,CAACC,SAAS,CAAC,MAAM,CAAC;EAExC,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,SAAS,CAACE,MAAM,EAAED,CAAC,EAAE,EAAE;IACzC,IAAID,SAAS,CAACC,CAAC,CAAC,CAACE,IAAI,KAAK,QAAQ,EAAE;MAClC,OAAO,IAAI;IACb;EACF;EAEA,OAAO,KAAK;AACd;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASN,MAAM,CAACE,MAAM,EAAE;EACtB,IAAI,CAACA,MAAM,EAAE;IACX,MAAM,IAAIK,SAAS,CAAC,6BAA6B,CAAC;EACpD;EAEA,IAAI,OAAOL,MAAM,CAACF,MAAM,KAAK,UAAU,EAAE;IACvC;IACAE,MAAM,CAACF,MAAM,EAAE;IACf;EACF;;EAEA;EACA,IAAI,CAACC,oBAAoB,CAACC,MAAM,CAAC,EAAE;IACjC;EACF;EAEA,IAAIM,QAAQ;EACZ,IAAIL,SAAS,GAAGD,MAAM,CAACC,SAAS,CAAC,OAAO,CAAC;EAEzC,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,SAAS,CAACE,MAAM,EAAED,CAAC,EAAE,EAAE;IACzCI,QAAQ,GAAGL,SAAS,CAACC,CAAC,CAAC;IAEvB,IAAII,QAAQ,CAACF,IAAI,KAAK,SAAS,IAAIE,QAAQ,CAACF,IAAI,KAAK,SAAS,EAAE;MAC9D;IACF;;IAEA;IACAE,QAAQ,CAACC,IAAI,CAACP,MAAM,CAAC;EACvB;AACF"},"metadata":{},"sourceType":"script","externalDependencies":[]}