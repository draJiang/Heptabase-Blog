{"ast":null,"code":"/*!\n * express\n * Copyright(c) 2009-2013 TJ Holowaychuk\n * Copyright(c) 2013 Roman Shtylman\n * Copyright(c) 2014-2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict';\n\n/**\n * Module dependencies.\n */\nvar bodyParser = require('body-parser');\nvar EventEmitter = require('events').EventEmitter;\nvar mixin = require('merge-descriptors');\nvar proto = require('./application');\nvar Route = require('./router/route');\nvar Router = require('./router');\nvar req = require('./request');\nvar res = require('./response');\n\n/**\n * Expose `createApplication()`.\n */\n\nexports = module.exports = createApplication;\n\n/**\n * Create an express application.\n *\n * @return {Function}\n * @api public\n */\n\nfunction createApplication() {\n  var app = function (req, res, next) {\n    app.handle(req, res, next);\n  };\n  mixin(app, EventEmitter.prototype, false);\n  mixin(app, proto, false);\n\n  // expose the prototype that will get set on requests\n  app.request = Object.create(req, {\n    app: {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: app\n    }\n  });\n\n  // expose the prototype that will get set on responses\n  app.response = Object.create(res, {\n    app: {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: app\n    }\n  });\n  app.init();\n  return app;\n}\n\n/**\n * Expose the prototypes.\n */\n\nexports.application = proto;\nexports.request = req;\nexports.response = res;\n\n/**\n * Expose constructors.\n */\n\nexports.Route = Route;\nexports.Router = Router;\n\n/**\n * Expose middleware\n */\n\nexports.json = bodyParser.json;\nexports.query = require('./middleware/query');\nexports.raw = bodyParser.raw;\nexports.static = require('serve-static');\nexports.text = bodyParser.text;\nexports.urlencoded = bodyParser.urlencoded;\n\n/**\n * Replace removed middleware with an appropriate error message.\n */\n\nvar removedMiddlewares = ['bodyParser', 'compress', 'cookieSession', 'session', 'logger', 'cookieParser', 'favicon', 'responseTime', 'errorHandler', 'timeout', 'methodOverride', 'vhost', 'csrf', 'directory', 'limit', 'multipart', 'staticCache'];\nremovedMiddlewares.forEach(function (name) {\n  Object.defineProperty(exports, name, {\n    get: function () {\n      throw new Error('Most middleware (like ' + name + ') is no longer bundled with Express and must be installed separately. Please see https://github.com/senchalabs/connect#middleware.');\n    },\n    configurable: true\n  });\n});","map":{"version":3,"names":["bodyParser","require","EventEmitter","mixin","proto","Route","Router","req","res","exports","module","createApplication","app","next","handle","prototype","request","Object","create","configurable","enumerable","writable","value","response","init","application","json","query","raw","static","text","urlencoded","removedMiddlewares","forEach","name","defineProperty","get","Error"],"sources":["/Users/jiangzilong/学习/minpg/Heptabase-Blog/node_modules/express/lib/express.js"],"sourcesContent":["/*!\n * express\n * Copyright(c) 2009-2013 TJ Holowaychuk\n * Copyright(c) 2013 Roman Shtylman\n * Copyright(c) 2014-2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict';\n\n/**\n * Module dependencies.\n */\n\nvar bodyParser = require('body-parser')\nvar EventEmitter = require('events').EventEmitter;\nvar mixin = require('merge-descriptors');\nvar proto = require('./application');\nvar Route = require('./router/route');\nvar Router = require('./router');\nvar req = require('./request');\nvar res = require('./response');\n\n/**\n * Expose `createApplication()`.\n */\n\nexports = module.exports = createApplication;\n\n/**\n * Create an express application.\n *\n * @return {Function}\n * @api public\n */\n\nfunction createApplication() {\n  var app = function(req, res, next) {\n    app.handle(req, res, next);\n  };\n\n  mixin(app, EventEmitter.prototype, false);\n  mixin(app, proto, false);\n\n  // expose the prototype that will get set on requests\n  app.request = Object.create(req, {\n    app: { configurable: true, enumerable: true, writable: true, value: app }\n  })\n\n  // expose the prototype that will get set on responses\n  app.response = Object.create(res, {\n    app: { configurable: true, enumerable: true, writable: true, value: app }\n  })\n\n  app.init();\n  return app;\n}\n\n/**\n * Expose the prototypes.\n */\n\nexports.application = proto;\nexports.request = req;\nexports.response = res;\n\n/**\n * Expose constructors.\n */\n\nexports.Route = Route;\nexports.Router = Router;\n\n/**\n * Expose middleware\n */\n\nexports.json = bodyParser.json\nexports.query = require('./middleware/query');\nexports.raw = bodyParser.raw\nexports.static = require('serve-static');\nexports.text = bodyParser.text\nexports.urlencoded = bodyParser.urlencoded\n\n/**\n * Replace removed middleware with an appropriate error message.\n */\n\nvar removedMiddlewares = [\n  'bodyParser',\n  'compress',\n  'cookieSession',\n  'session',\n  'logger',\n  'cookieParser',\n  'favicon',\n  'responseTime',\n  'errorHandler',\n  'timeout',\n  'methodOverride',\n  'vhost',\n  'csrf',\n  'directory',\n  'limit',\n  'multipart',\n  'staticCache'\n]\n\nremovedMiddlewares.forEach(function (name) {\n  Object.defineProperty(exports, name, {\n    get: function () {\n      throw new Error('Most middleware (like ' + name + ') is no longer bundled with Express and must be installed separately. Please see https://github.com/senchalabs/connect#middleware.');\n    },\n    configurable: true\n  });\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}